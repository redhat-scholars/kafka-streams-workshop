<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Manage Access to Kafka Instances :: Kafka Streams Tutorial</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/kafka-streams-tutorial/02-create-a-service-account.html">
    <link rel="prev" href="01-provision-kafka-instance.html">
    <link rel="next" href="03-create-topics.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/course-template">Kafka Streams Tutorial</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="kafka-streams-tutorial" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-provision-kafka-instance.html">1. Provision a Kafka instance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-provision-kafka-instance.html#redhataccount">Create a Red Hat Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-provision-kafka-instance.html#kafka">Provision a Kafka Instance</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-create-a-service-account.html">2. Manage Access &amp; RBAC</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#serviceaccount">Create a Service Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#serviceaccountpermissions">Set Permissions for a Service Account</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="03-create-topics.html">3. Create Kafka Topics</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-quarkus-kafka-streams.html">4. Build Streaming Applications with OpenShift Streams for Apache Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-kafka-streams.html#devsandboxaccess">Access the Developer Sandbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-kafka-streams.html#startcodereadyworkspaces">Start CodeReady Workspaces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-kafka-streams.html#runquarkusgeneratorapp">Configure and run the Quarkus Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-kafka-streams.html#runkafkastreamsapp">Configure and run the Kafka Streams Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-kafka-streams.html#experimentwithstreams">Experiment with Kafka Streams</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-kafka-streams.html#cleanup">Clean up</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Kafka Streams Tutorial</a></li>
    <li><a href="02-create-a-service-account.html">2. Manage Access &amp; RBAC</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/evanshortiss/kafka-streams-workshop/edit/master/documentation/modules/ROOT/pages/02-create-a-service-account.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Manage Access to Kafka Instances</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>To connect your applications or services to a Streams for Apache Kafka instance, you need to create a service account.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serviceaccount"><a class="anchor" href="#serviceaccount"></a>Create a Service Account</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <strong>Kafka Instances</strong> overview page, select the <strong>Options</strong> icon (the three dots) for the Kafka instance you just created. Select <strong>Connection</strong> to display connection information.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-three-dot-menu.png" alt="rhosak three dot menu">
</div>
</div>
</li>
<li>
<p>Copy the <strong>Bootstrap server</strong> endpoint to a secure location. You will need this when connecting to your Kafka instance.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-connection-details.png" alt="rhosak connection details">
</div>
</div>
</li>
<li>
<p>Copy the <strong>Token endpoint URL</strong> of the <strong>SASL/OAUTHBEARER</strong> authentication method to a secure location. You will need this URL when connecting to your Kafka instance.</p>
</li>
<li>
<p>Click <strong>Create service account</strong> to set up the service account. Enter a unique service account name and an optional description, and click <strong>Create</strong>.</p>
</li>
<li>
<p>Copy the generated <strong>Client ID</strong> and <strong>Client Secret</strong> to a secure location. These are the credentials that you’ll use to connect to this Kafka instance.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated credentials are displayed only one time, so ensure that you’ve successfully and securely saved the copied credentials before closing the credentials window.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After saving the generated credentials, select the confirmation check box and close the Credentials window.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-service-account.png" alt="rhosak service account">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You’ll use the service account information that you saved to configure your application to connect to your Kafka instances when you’re ready. For example, if you plan to use <a href="https://github.com/edenhill/kcat">kcat</a> to interact with your Kafka instance, you’ll use this information to set your bootstrap server and client environment variables.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serviceaccountpermissions"><a class="anchor" href="#serviceaccountpermissions"></a>Set Permissions for a Service Account</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you create a service account to connect to a Kafka instance, you must also set the appropriate level of access for that new account in the Access Control List (ACL) of the Kafka instance. Streams for Apache Kafka uses ACLs provided by Kafka that enable you to manage how other user accounts and service accounts are permitted to interact with the Kafka resources that you create.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <strong>Kafka Instances</strong> page, click the name of the Kafka instance you previously created.</p>
</li>
<li>
<p>Click the <strong>Access</strong> tab to view the current ACL for this instance.</p>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-default-access.png" alt="rhosak default access">
</div>
</div>
</li>
<li>
<p>Click <strong>Manage access</strong>, use the <strong>Account</strong> drop-down menu to select the service account that you previously created, and click <strong>Next</strong>.</p>
</li>
<li>
<p>Under <strong>Assign Permissions</strong>, use the drop-down menus to set the permissions shown in the following table for this service account. Click <strong>Add</strong> to add each new resource permission.</p>
<div class="paragraph">
<p>These permissions enable applications associated with the service account to create and delete topics in the instance, to produce and consume messages in any topic in the instance, and to use any consumer group and any producer.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Example ACL permissions for a new service account</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Resource type</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Resource identifier and value</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Access type</p></th>
<th class="tableblock halign-left valign-top"><p class="tableblock">Operation</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Topic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Is</code> = <code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Allow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>All</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Consumer group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Is</code> = <code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Allow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Read</code></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/rhosak-access-serviceaccount.png" alt="rhosak access serviceaccount">
</div>
</div>
</li>
<li>
<p>After you add these permissions for the service account, click <strong>Save</strong> to finish.</p>
</li>
</ol>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="01-provision-kafka-instance.html">1. Provision a Kafka instance</a></span>
  <span class="next"><a href="03-create-topics.html">3. Create Kafka Topics</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
